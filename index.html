<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>AsomaRapi - Sector Ap√≠cola</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #fffdf2; color: #4a3c00; margin: 20px; }
        .container { max-width: 500px; margin: auto; background: white; padding: 25px; border-radius: 15px; box-shadow: 0 10px 20px rgba(0,0,0,0.08); }
        h2 { text-align: center; color: #d4a017; }
        .producto { border-bottom: 1px solid #f0f0f0; padding: 15px 0; display: flex; justify-content: space-between; align-items: center; }
        .btn-pedido { background-color: #ffcc00; border: none; padding: 10px 18px; cursor: pointer; border-radius: 8px; font-weight: bold; transition: 0.3s; }
        .btn-pedido:hover { background-color: #e6b800; }
        .btn-pedido:disabled { background-color: #eee; color: #999; cursor: not-allowed; }
        .stock-tag { font-size: 0.85em; display: block; margin-top: 4px; }
        .agotado { color: #cc0000; font-weight: bold; }
        .horario-msg { background: #fff9e6; border: 1px solid #ffeeba; padding: 12px; border-radius: 8px; margin-bottom: 20px; font-size: 0.9em; line-height: 1.4; }
        .asesor-btn { display: block; text-align: center; margin-top: 25px; background-color: #25d366; color: white; text-decoration: none; padding: 12px; border-radius: 8px; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <h2>üêù AsomaRapi</h2>
    
    <div id="status-horario" class="horario-msg">Verificando horario...</div>

    <div id="catalogo"></div>

    <a href="https://wa.me/573015832244?text=Hola,%20necesito%20hablar%20con%20un%20asesor%20de%20AsomaRapi" class="asesor-btn">
        üì≤ Hablar con un Asesor
    </a>
</div>

<script>
    const CELULAR_EMPRESA = "573015832244"; // N√∫mero configurado

    const productos = [
        { id: 1, nombre: "Miel Multiforal 500g", precio: 25000, stock: 10 },
        { id: 2, nombre: "Polen Granulado 250g", precio: 18000, stock: 0 },
        { id: 3, nombre: "Prop√≥leo Extracto", precio: 15000, stock: 15 }
    ];

    function verificarHorario() {
        const ahora = new Date();
        const opciones = { timeZone: 'America/Bogota', hour12: false, hour: 'numeric' };
        const horaBogota = parseInt(new Intl.DateTimeFormat('en-US', { timeZone: 'America/Bogota', hour: 'numeric', hour12: false }).format(ahora));
        const diaBogota = new Intl.DateTimeFormat('es-CO', { timeZone: 'America/Bogota', weekday: 'long' }).format(ahora);
        
        const esFinDeSemana = (diaBogota === 's√°bado' || diaBogota === 'domingo');
        const estaEnHorario = (horaBogota >= 8 && horaBogota < 17 && !esFinDeSemana);
        
        const statusDiv = document.getElementById('status-horario');
        if (estaEnHorario) {
            statusDiv.innerHTML = "<b>‚úÖ Abierto:</b> Horario de atenci√≥n (8am-5pm). Tu pedido ser√° procesado ahora.";
        } else {
            statusDiv.innerHTML = "<b>üåô Cerrado:</b> Se despachar√° el pr√≥ximo d√≠a h√°bil a las 8:00 AM.";
        }
        return estaEnHorario ? "En horario laboral" : "Fuera de horario (Pr√≥ximo despacho: 8:00 AM)";
    }

    function cargarCatalogo() {
        const catalogoDiv = document.getElementById('catalogo');
        productos.forEach(p => {
            const div = document.createElement('div');
            div.className = 'producto';
            const sinStock = p.stock === 0;
            
            div.innerHTML = `
                <div>
                    <strong>${p.nombre}</strong><br>
                    <span>$${p.precio.toLocaleString()}</span>
                    <span class="stock-tag ${sinStock ? 'agotado' : ''}">
                        ${sinStock ? '¬°PRODUCTO AGOTADO!' : 'Disponibles: ' + p.stock}
                    </span>
                </div>
                <button class="btn-pedido" ${sinStock ? 'disabled' : ''} onclick="enviarPedido('${p.nombre}')">
                    Pedir
                </button>
            `;
            catalogoDiv.appendChild(div);
        });
    }

    function enviarPedido(nombreProducto) {
        const horarioInfo = verificarHorario();
        const mensaje = `Hola AsomaRapi, quiero realizar un pedido:%0A%0A- *Producto:* ${nombreProducto}%0A- *Estado:* ${horarioInfo}%0A%0APor favor confirmarme el proceso.`;
        
        // Abre WhatsApp con el mensaje predefinido
        window.open(`https://wa.me/${CELULAR_EMPRESA}?text=${mensaje}`, '_blank');
    }

    verificarHorario();
    cargarCatalogo();
</script>

</body>
</html>
